%!TEX encoding = IsoLatin

%\chapter{Architecture logique}

\section{Diagramme de package}

\begin{figure}[H]
	\includegraphics[scale=0.5]{fig/packageDiagram.jpg}
	\centering
	\caption{Diagramme de package de SimulatHEURE}
	\label{f:package_Diag}
\end{figure}

\paragraph{}
La figure \ref{f:package_Diag} présente la structure logique des modules du programme. Le module principal, nommé SimulatHeure, est composé des classes SimDisplay et SimTimer et Simulation, dont le fonctionnement est expliqué au paragraphe suivant. Le Module SimulatHeure appelle et contrôle un second module gérant le fonctionnement du réseau routier, d'où son nom "Network". Ce dernier est constitué de tout les éléments composant un réseau d'autobus, incluant \textit{Node}, \textit{Line}, \textit{Source}, \textit{Directions}, \textit{Route}, \textit{Bus} et \textit{Passenger}. L'interaction des classes dans Network est présenté en détail plus loin.
\paragraph{}
La classe \textit{Simulation} est le cerveau de la simulation. C'est elle qui contient les listes des différentes composantes du réseau routier. Elle permet d'ajouter, de supprimer et de faire bouger les différentes composantes du réseau routier. La classe \textit{SimDisplay}, incorporée dans le module SimulatHeure, prend en charge l'affichage en temps réel de la simulation des transports. Son champs d'actions couvre entre autres le dessin des éléments du réseau sur la fenêtre de simulation, la gestion des contrôles usagers avec la souris (déplacement de la vue, zoom, dezoom, selection, etc.) ainsi que l'affichage de la grille d'alignement dynamique. La classe \textit{SimTimer} permet d'appeller périodiquement la fonction simulateTick() de \textit{Simulation}, ce qui met en marche la simulation.
\paragraph{}
Les classes dans \textit{Network} sont toutes des classes purement logique, c'est à dire qu'elle n'ont aucun lien avec l'interface utilisateur. Les divers éléments tels les noeuds, les segments où les bus possèdent des attributs spatiaux, correspondant à leur position sur une grille virtuelle, qui doit être configurée de façon externe, ici par un contrôlleur et un panneau d'affichage graphique.  C'est le contrôlleur qui permet de faire intéragir les différentes classes ensemble par leurs fonctions.

